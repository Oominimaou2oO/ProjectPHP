!function(t,e,i,o){"use strict";function s(e,i){this.$element=t(e),i&&("string"===t.type(i.delay)||"number"===t.type(i.delay))&&(i.delay={show:i.delay,hide:i.delay}),this.options=t.extend({},a,i),this._defaults=a,this._name=n,this._targetclick=!1,this.init(),l.push(this.$element)}var n="webuiPopover",h="webui-popover",r="webui.popover",a={placement:"auto",width:"auto",height:"auto",trigger:"click",style:"",delay:{show:null,hide:null},async:{type:"GET",before:null,success:null,error:null},cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,url:"",type:"html",animation:null,template:'<div class="webui-popover"><div class="webui-arrow"></div><div class="webui-popover-inner"><a href="#" class="close"></a><h3 class="webui-popover-title"></h3><div class="webui-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>',backdrop:!1,dismissible:!0,onShow:null,onHide:null,abortXHR:!0,autoHide:!1,offsetTop:0,offsetLeft:0,iframeOptions:{frameborder:"0",allowtransparency:"true",id:"",name:"",scrolling:"",onload:"",height:"",width:""}},l=[],p=t('<div class="webui-popover-backdrop"></div>'),c=0,f=!1,g=-2e3,d=t(i),u=function(t,e){return isNaN(t)?e||0:Number(t)},m=function(t){return t.data("plugin_"+n)},y=function(){for(var t=0;t<l.length;t++)l[t].webuiPopover("hide");d.trigger("hiddenAll."+r)},v=function(t){var e={x:0,y:0};if("touchstart"===t.type||"touchmove"===t.type||"touchend"===t.type||"touchcancel"===t.type){var i=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0];e.x=i.pageX,e.y=i.pageY}else("mousedown"===t.type||"mouseup"===t.type||"click"===t.type)&&(e.x=t.pageX,e.y=t.pageY);return e};s.prototype={init:function(){"click"===this.getTrigger()?this.$element.off("click touchend").on("click touchend",t.proxy(this.toggle,this)):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave click").on("mouseenter",t.proxy(this.mouseenterHandler,this)).on("mouseleave",t.proxy(this.mouseleaveHandler,this)),this._poped=!1,this._inited=!0,this._opened=!1,this._idSeed=c,this.options.backdrop&&p.appendTo(i.body).hide(),c++,"sticky"===this.getTrigger()&&this.show()},destroy:function(){for(var t=-1,e=0;e<l.length;e++)if(l[e]===this.$element){t=e;break}l.splice(t,1),this.hide(),this.$element.data("plugin_"+n,null),"click"===this.getTrigger()?this.$element.off("click"):"hover"===this.getTrigger()&&this.$element.off("mouseenter mouseleave"),this.$target&&this.$target.remove()},hide:function(e,i){if((e||"sticky"!==this.getTrigger())&&this._opened){i&&(i.preventDefault(),i.stopPropagation()),this.xhr&&this.options.abortXHR===!0&&(this.xhr.abort(),this.xhr=null);var o=t.Event("hide."+r);if(this.$element.trigger(o,[this.$target]),this.$target){this.$target.removeClass("in").addClass(this.getHideAnimation());var s=this;setTimeout(function(){s.$target.hide()},300)}this.options.backdrop&&p.hide(),this._opened=!1,this.$element.trigger("hidden."+r,[this.$target]),this.options.onHide&&this.options.onHide(this.$target)}},resetAutoHide:function(){var t=this,e=t.getAutoHide();e&&(t.autoHideHandler&&clearTimeout(t.autoHideHandler),t.autoHideHandler=setTimeout(function(){t.hide()},e))},toggle:function(t){t&&(t.preventDefault(),t.stopPropagation()),this[this.getTarget().hasClass("in")?"hide":"show"]()},hideAll:function(){y()},show:function(){var t=this.getTarget().removeClass().addClass(h).addClass(this._customTargetClass);this.options.multi||this.hideAll(),this._opened||(this.getCache()&&this._poped&&""!==this.content||(this.content="",this.setTitle(this.getTitle()),this.options.closeable||t.find(".close").off("click").remove(),this.isAsync()?this.setContentASync(this.options.content):this.setContent(this.getContent()),t.show()),this.displayContent(),this.options.onShow&&this.options.onShow(t),this.bindBodyEvents(),this.options.backdrop&&p.show(),this._opened=!0,this.resetAutoHide())},displayContent:function(){var e=this.getElementPosition(),o=this.getTarget().removeClass().addClass(h).addClass(this._customTargetClass),s=this.getContentElement(),n=o[0].offsetWidth,a=o[0].offsetHeight,l="bottom",p=t.Event("show."+r);this.$element.trigger(p,[o]);var c=this.$element.data("width")||this.options.width;""===c&&(c=this._defaults.width),"auto"!==c&&o.width(c);var f=this.$element.data("height")||this.options.height;""===f&&(f=this._defaults.height),"auto"!==f&&s.height(f),this.options.style&&this.$target.addClass(h+"-"+this.options.style),this.options.arrow||o.find(".webui-arrow").remove(),o.detach().css({top:g,left:g,display:"block"}),this.getAnimation()&&o.addClass(this.getAnimation()),o.appendTo(i.body),l=this.getPlacement(e),this.$element.trigger("added."+r),this.initTargetEvents(),this.options.padding||("auto"!==this.options.height&&s.css("height",s.outerHeight()),this.$target.addClass("webui-no-padding")),n=o[0].offsetWidth,a=o[0].offsetHeight;var d=this.getTargetPositin(e,l,n,a);if(this.$target.css(d.position).addClass(l).addClass("in"),"iframe"===this.options.type){var u=o.find("iframe"),m=o.width(),y=u.parent().height();""!==this.options.iframeOptions.width&&"auto"!==this.options.iframeOptions.width&&(m=this.options.iframeOptions.width),""!==this.options.iframeOptions.height&&"auto"!==this.options.iframeOptions.height&&(y=this.options.iframeOptions.height),u.width(m).height(y)}if(this.options.arrow||this.$target.css({margin:0}),this.options.arrow){var v=this.$target.find(".webui-arrow");v.removeAttr("style"),"left"===l||"right"===l?v.css({top:this.$target.height()/2}):("top"===l||"bottom"===l)&&v.css({left:this.$target.width()/2}),d.arrowOffset&&(-1===d.arrowOffset.left||-1===d.arrowOffset.top?v.hide():v.css(d.arrowOffset))}this._poped=!0,this.$element.trigger("shown."+r,[this.$target])},isTargetLoaded:function(){return 0===this.getTarget().find("i.glyphicon-refresh").length},getTriggerElement:function(){return this.$element},getTarget:function(){if(!this.$target){var e=n+this._idSeed;this.$target=t(this.options.template).attr("id",e).data("trigger-element",this.getTriggerElement()),this._customTargetClass=this.$target.attr("class")!==h?this.$target.attr("class"):null,this.getTriggerElement().attr("data-target",e)}return this.$target},getTitleElement:function(){return this.getTarget().find("."+h+"-title")},getContentElement:function(){return this.$contentElement||(this.$contentElement=this.getTarget().find("."+h+"-content")),this.$contentElement},getTitle:function(){return this.$element.attr("data-title")||this.options.title||this.$element.attr("title")},getUrl:function(){return this.$element.attr("data-url")||this.options.url},getAutoHide:function(){return this.$element.attr("data-auto-hide")||this.options.autoHide},getOffsetTop:function(){return u(this.$element.attr("data-offset-top"))||this.options.offsetTop},getOffsetLeft:function(){return u(this.$element.attr("data-offset-left"))||this.options.offsetLeft},getCache:function(){var t=this.$element.attr("data-cache");if("undefined"!=typeof t)switch(t.toLowerCase()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":return!1}return this.options.cache},getTrigger:function(){return this.$element.attr("data-trigger")||this.options.trigger},getDelayShow:function(){var t=this.$element.attr("data-delay-show");return"undefined"!=typeof t?t:0===this.options.delay.show?0:this.options.delay.show||100},getHideDelay:function(){var t=this.$element.attr("data-delay-hide");return"undefined"!=typeof t?t:0===this.options.delay.hide?0:this.options.delay.hide||100},getAnimation:function(){var t=this.$element.attr("data-animation");return t||this.options.animation},getHideAnimation:function(){var t=this.getAnimation();return t?t+"-out":"out"},setTitle:function(t){var e=this.getTitleElement();t?e.html(t):e.remove()},hasContent:function(){return this.getContent()},getIframe:function(){var e=t("<iframe></iframe>").attr("src",this.getUrl()),i=this;return t.each(this._defaults.iframeOptions,function(t){"undefined"!=typeof i.options.iframeOptions[t]&&e.attr(t,i.options.iframeOptions[t])}),e},getContent:function(){if(this.getUrl())switch(this.options.type){case"iframe":this.content=this.getIframe();break;case"html":try{this.content=t(this.getUrl()),this.content.is(":visible")||this.content.show()}catch(e){throw new Error("Unable to get popover content. Invalid selector specified.")}}else if(!this.content){var i="";if(i=t.isFunction(this.options.content)?this.options.content.apply(this.$element[0],[this]):this.options.content,this.content=this.$element.attr("data-content")||i,!this.content){var o=this.$element.next();o&&o.hasClass(h+"-content")&&(this.content=o)}}return this.content},setContent:function(t){var e=this.getTarget(),i=this.getContentElement();"string"==typeof t?i.html(t):t instanceof jQuery&&(i.html(""),this.options.cache?t.removeClass(h+"-content").appendTo(i):t.clone(!0,!0).removeClass(h+"-content").appendTo(i)),this.$target=e},isAsync:function(){return"async"===this.options.type},setContentASync:function(e){var i=this;this.xhr||(this.xhr=t.ajax({url:this.getUrl(),type:this.options.async.type,cache:this.getCache(),beforeSend:function(t){i.options.async.before&&i.options.async.before(i,t)},success:function(o){i.bindBodyEvents(),e&&t.isFunction(e)?i.content=e.apply(i.$element[0],[o]):i.content=o,i.setContent(i.content);var s=i.getContentElement();s.removeAttr("style"),i.displayContent(),i.options.async.success&&i.options.async.success(i,o)},complete:function(){i.xhr=null},error:function(t,e){i.options.async.error&&i.options.async.error(i,t,e)}}))},bindBodyEvents:function(){this.options.dismissible&&"click"===this.getTrigger()&&!f&&(d.off("keyup.webui-popover").on("keyup.webui-popover",t.proxy(this.escapeHandler,this)),d.off("click.webui-popover touchend.webui-popover").on("click.webui-popover touchend.webui-popover",t.proxy(this.bodyClickHandler,this)))},mouseenterHandler:function(){var t=this;t._timeout&&clearTimeout(t._timeout),t._enterTimeout=setTimeout(function(){t.getTarget().is(":visible")||t.show()},this.getDelayShow())},mouseleaveHandler:function(){var t=this;clearTimeout(t._enterTimeout),t._timeout=setTimeout(function(){t.hide()},this.getHideDelay())},escapeHandler:function(t){27===t.keyCode&&this.hideAll()},bodyClickHandler:function(t){f=!0;for(var e=!0,i=0;i<l.length;i++){var o=m(l[i]);if(o&&o._opened){var s=o.getTarget().offset().left,n=o.getTarget().offset().top,h=o.getTarget().offset().left+o.getTarget().width(),r=o.getTarget().offset().top+o.getTarget().height(),a=v(t),p=a.x>=s&&a.x<=h&&a.y>=n&&a.y<=r;if(p){e=!1;break}}}e&&y()},initTargetEvents:function(){"hover"===this.getTrigger()&&this.$target.off("mouseenter mouseleave").on("mouseenter",t.proxy(this.mouseenterHandler,this)).on("mouseleave",t.proxy(this.mouseleaveHandler,this)),this.$target.find(".close").off("click").on("click",t.proxy(this.hide,this,!0))},getPlacement:function(t){var e,o=i.documentElement,s=i.body,n=o.clientWidth,h=o.clientHeight,r=Math.max(s.scrollTop,o.scrollTop),a=Math.max(s.scrollLeft,o.scrollLeft),l=Math.max(0,t.left-a),p=Math.max(0,t.top-r);e="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.$element[0]):this.$element.data("placement")||this.options.placement;var c="horizontal"===e,f="vertical"===e,g="auto"===e||c||f;return g?e=n/3>l?h/3>p?c?"right-bottom":"bottom-right":2*h/3>p?f?h/2>=p?"bottom-right":"top-right":"right":c?"right-top":"top-right":2*n/3>l?h/3>p?c?n/2>=l?"right-bottom":"left-bottom":"bottom":2*h/3>p?c?n/2>=l?"right":"left":h/2>=p?"bottom":"top":c?n/2>=l?"right-top":"left-top":"top":h/3>p?c?"left-bottom":"bottom-left":2*h/3>p?f?h/2>=p?"bottom-left":"top-left":"left":c?"left-top":"top-left":"auto-top"===e?e=n/3>l?"top-right":2*n/3>l?"top":"top-left":"auto-bottom"===e?e=n/3>l?"bottom-right":2*n/3>l?"bottom":"bottom-left":"auto-left"===e?e=h/3>p?"left-top":2*h/3>p?"left":"left-bottom":"auto-right"===e&&(e=h/3>p?"right-top":2*h/3>p?"right":"right-bottom"),e},getElementPosition:function(){return t.extend({},this.$element.offset(),{width:this.$element[0].offsetWidth,height:this.$element[0].offsetHeight})},getTargetPositin:function(t,e,o,s){var n=t,h=i.documentElement,r=i.body,a=h.clientWidth,l=h.clientHeight,p=this.$element.outerWidth(),c=this.$element.outerHeight(),f=Math.max(r.scrollTop,h.scrollTop),d=Math.max(r.scrollLeft,h.scrollLeft),u={},m=null,y=this.options.arrow?20:0,v=10,b=y+v>p?y:0,w=y+v>c?y:0,T=0,$=l+f,C=a+d,k=n.left+n.width/2-b>0,H=n.left+n.width/2+b<C,_=n.top+n.height/2-w>0,x=n.top+n.height/2+w<$;switch(e){case"bottom":u={top:n.top+n.height,left:n.left+n.width/2-o/2};break;case"top":u={top:n.top-s,left:n.left+n.width/2-o/2};break;case"left":u={top:n.top+n.height/2-s/2,left:n.left-o};break;case"right":u={top:n.top+n.height/2-s/2,left:n.left+n.width};break;case"top-right":u={top:n.top-s,left:k?n.left-b:v},m={left:k?Math.min(p,o)/2+b:g};break;case"top-left":T=H?b:-v,u={top:n.top-s,left:n.left-o+n.width+T},m={left:H?o-Math.min(p,o)/2-b:g};break;case"bottom-right":u={top:n.top+n.height,left:k?n.left-b:v},m={left:k?Math.min(p,o)/2+b:g};break;case"bottom-left":T=H?b:-v,u={top:n.top+n.height,left:n.left-o+n.width+T},m={left:H?o-Math.min(p,o)/2-b:g};break;case"right-top":T=x?w:-v,u={top:n.top-s+n.height+T,left:n.left+n.width},m={top:x?s-Math.min(c,s)/2-w:g};break;case"right-bottom":u={top:_?n.top-w:v,left:n.left+n.width},m={top:_?Math.min(c,s)/2+w:g};break;case"left-top":T=x?w:-v,u={top:n.top-s+n.height+T,left:n.left-o},m={top:x?s-Math.min(c,s)/2-w:g};break;case"left-bottom":u={top:_?n.top-w:v,left:n.left-o},m={top:_?Math.min(c,s)/2+w:g}}return u.top+=this.getOffsetTop(),u.left+=this.getOffsetLeft(),{position:u,arrowOffset:m}}},t.fn[n]=function(e,i){var o=[],h=this.each(function(){var h=t.data(this,"plugin_"+n);h?"destroy"===e?h.destroy():"string"==typeof e&&o.push(h[e]()):(e?"string"==typeof e?"destroy"!==e&&(i||(h=new s(this,null),o.push(h[e]()))):"object"==typeof e&&(h=new s(this,e)):h=new s(this,null),t.data(this,"plugin_"+n,h))});return o.length?o:h}}(jQuery,window,document);